!"use strict";
/**
 * @The11View
 * Licensed Pages / Bio Links
 * -------------------------------------------------------------
 * Terms: https://the11view.xyz/legal/tos
 *
 * Redistribution or self-crediting is not allowed.
 * Automated enforcement is active.
 *
 * Module Map:
 *   state          https://t11v.icu/dropper/codes/state.ts
 *   theme          https://t11v.icu/dropper/codes/theme.ts
 *   background     https://t11v.icu/dropper/codes/background.ts
 *   playerCore     https://t11v.icu/dropper/codes/playerCore.ts
 *   playerControls https://t11v.icu/dropper/codes/playerControls.ts
 *   greeting       https://t11v.icu/dropper/codes/greeting.ts
 *   presence       https://t11v.icu/dropper/codes/presence.ts
 *   views          https://t11v.icu/dropper/codes/views.ts
 *   overlay        https://t11v.icu/dropper/codes/overlay.ts
 *   dragdrop       https://t11v.icu/dropper/codes/dragdrop.ts
 *   volume         https://t11v.icu/dropper/codes/volume.ts
 *   progress       https://t11v.icu/dropper/codes/progress.ts
 *   dropdown       https://t11v.icu/dropper/codes/dropdown.ts
 *   hotkeys        https://t11v.icu/dropper/codes/hotkeys.ts
 *   swipe          https://t11v.icu/dropper/codes/swipe.ts
 *   apiSync        https://t11v.icu/dropper/codes/apiSync.ts
 *   notifications  https://t11v.icu/dropper/codes/notifications.ts
 *   playlist       https://t11v.icu/dropper/codes/playlist.ts
 *   equalizer      https://t11v.icu/dropper/codes/equalizer.ts
 *   visualizer     https://t11v.icu/dropper/codes/visualizer.ts
 *   cache          https://t11v.icu/dropper/codes/cache.ts
 *   history        https://t11v.icu/dropper/codes/history.ts
 *   shuffle        https://t11v.icu/dropper/codes/shuffle.ts
 *   repeat         https://t11v.icu/dropper/codes/repeat.ts
 *   lyrics         https://t11v.icu/dropper/codes/lyrics.ts
 *   timers         https://t11v.icu/dropper/codes/timers.ts
 *   scheduler      https://t11v.icu/dropper/codes/scheduler.ts
 *   userAuth       https://t11v.icu/dropper/codes/userAuth.ts
 * -------------------------------------------------------------
 */
const userPreferences={theme:localStorage.getItem("theme")||"galaxy",volume:parseFloat(localStorage.getItem("volume"))||.7,backgroundEffect:localStorage.getItem("backgroundEffect")||"snow"},themeBtn=(document.body.className=userPreferences.theme+"-theme",document.getElementById("theme-btn")),themeDropdown=document.getElementById("theme-dropdown"),bgBtn=(themeBtn.addEventListener("click",e=>{e.stopPropagation(),themeDropdown.classList.toggle("show")}),document.addEventListener("click",()=>{themeDropdown.classList.remove("show")}),document.querySelectorAll(".theme-option").forEach(t=>{t.addEventListener("click",e=>{e.stopPropagation();e=t.getAttribute("data-theme");document.body.className=e+"-theme",userPreferences.theme=e,localStorage.setItem("theme",e),document.querySelectorAll(".theme-option").forEach(e=>{e.classList.remove("active")}),t.classList.add("active"),themeDropdown.classList.remove("show")})}),document.getElementById("bg-btn")),bgDropdown=document.getElementById("bg-dropdown"),backgroundContainer=document.getElementById("background-container");if(!localStorage.getItem("backgroundEffect")){localStorage.setItem("backgroundEffect","galaxy")}
userPreferences.backgroundEffect=localStorage.getItem("backgroundEffect");function initBackgroundEffect(){switch(backgroundContainer.innerHTML="",userPreferences.backgroundEffect){case "galaxy":initGalaxy();break;case "aurora":initAurora();break;case "nebula":initNebula();break;case "geometric":initGeometric();break;case "snow":initSnow()}}
function initSnow(){setInterval(function(){const e=document.createElement("div");e.className="snow";var t=4*Math.random()+2;e.style.width=t+"px",e.style.height=t+"px",e.style.left=Math.random()*window.innerWidth+"px",e.style.animationDuration=8*Math.random()+5+"s",e.style.opacity=.7*Math.random()+.3,backgroundContainer.appendChild(e),setTimeout(()=>{e.remove()},13e3)},200)}
function initAurora(){var t=document.createElement("div");t.className="aurora-bg",backgroundContainer.appendChild(t);for(let e=0;e<3;e++){var a=document.createElement("div");a.className="aurora",t.appendChild(a)}}
function initNebula(){var t=document.createElement("div"),a=(t.className="nebula-bg",backgroundContainer.appendChild(t),["#ff006e","#8338ec","#3a86ff","#06ffa5","#ffbe0b"]);for(let e=0;e<8;e++){var n=document.createElement("div");n.className="nebula-cloud",n.style.width=300*Math.random()+100+"px",n.style.height=n.style.width,n.style.background=a[Math.floor(Math.random()*a.length)],n.style.left=100*Math.random()+"%",n.style.top=100*Math.random()+"%",n.style.animationDelay=10*Math.random()+"s",t.appendChild(n)}}
function initGeometric(){var t=document.createElement("div"),a=(t.className="geometric-bg",backgroundContainer.appendChild(t),["polygon(50% 0%, 0% 100%, 100% 100%)","polygon(50% 0%, 100% 50%, 50% 100%, 0% 50%)","polygon(25% 0%, 75% 0%, 100% 50%, 75% 100%, 25% 100%, 0% 50%)"]);for(let e=0;e<15;e++){var n=document.createElement("div");n.className="geometric-shape",n.style.width=100*Math.random()+50+"px",n.style.height=n.style.width,n.style.clipPath=a[Math.floor(Math.random()*a.length)],n.style.left=100*Math.random()+"%",n.style.top=100*Math.random()+"%",n.style.animationDuration=20*Math.random()+10+"s",n.style.animationDelay=5*Math.random()+"s",t.appendChild(n)}}
function initGalaxy(){var t=document.createElement("div");t.className="galaxy-bg",backgroundContainer.appendChild(t);for(let e=0;e<200;e++){var a=document.createElement("div");a.className="star",a.style.width=3*Math.random()+1+"px",a.style.height=a.style.width,a.style.left=100*Math.random()+"%",a.style.top=100*Math.random()+"%",a.style.animationDelay=3*Math.random()+"s",a.style.animationDuration=3*Math.random()+2+"s",t.appendChild(a)}
var n=["rgba(138, 43, 226, 0.3)","rgba(30, 144, 255, 0.3)","rgba(255, 20, 147, 0.3)"];for(let e=0;e<5;e++){var o=document.createElement("div");o.style.position="absolute",o.style.width=200*Math.random()+100+"px",o.style.height=o.style.width,o.style.borderRadius="50%",o.style.background=n[e%n.length],o.style.filter="blur(40px)",o.style.left=100*Math.random()+"%",o.style.top=100*Math.random()+"%",o.style.animation=`nebula-float ${30*Math.random()+20}s ease-in-out infinite`,t.appendChild(o)}}
function setGreeting(){var e=document.getElementById("greeting"),t=(new Date).getHours();let a;a=t<12?"Good morning":t<18?"Good afternoon":"Good evening",e.textContent=a}
bgBtn.addEventListener("click",e=>{e.stopPropagation(),bgDropdown.classList.toggle("show")}),document.addEventListener("click",()=>{bgDropdown.classList.remove("show")}),document.querySelectorAll(".bg-option").forEach(t=>{t.addEventListener("click",e=>{e.stopPropagation();e=t.getAttribute("data-bg");switch(backgroundContainer.innerHTML="",e){case "snow":initSnow();break;case "aurora":initAurora();break;case "nebula":initNebula();break;case "geometric":initGeometric();break;case "galaxy":initGalaxy()}
userPreferences.backgroundEffect=e,localStorage.setItem("backgroundEffect",e),document.querySelectorAll(".bg-option").forEach(e=>{e.classList.remove("active")}),t.classList.add("active"),bgDropdown.classList.remove("show")})}),setGreeting(),document.getElementById("overlay").addEventListener("click",()=>{document.getElementById("overlay").classList.add("hidden")}),initBackgroundEffect();let createClient=supabase.createClient;const SUPABASE_URL="https://bwszgupluawpotbstodf.supabase.co",SUPABASE_ANON_KEY="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJ3c3pndXBsdWF3cG90YnN0b2RmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg4NTY1OTUsImV4cCI6MjA3NDQzMjU5NX0.TIpg0JzSZ1fkP1sNmaDB8uTdfROBVBIeTjpATbFBqDE",db=createClient(SUPABASE_URL,SUPABASE_ANON_KEY);async function updateViewCounter(){var e=parseInt(localStorage.getItem("views")||0);if(e++,localStorage.setItem("views",e),document.getElementById("views-count").textContent=e,"localhost"===location.hostname||"127.0.0.1"===location.hostname)console.warn("[V11] localhost detected, skipping supabase module."),console.log("Using localStorage due to supabase blockage / failure.");else try{var t,a,n,{data:o,error:r}=await db.rpc("increment_view");if(r)throw r;let e=null;"number"==typeof o?e=o:Array.isArray(o)&&0<o.length?(t=o[0],a=Object.keys(t)[0],e=t[a]):o&&"object"==typeof o&&(n=Object.keys(o)[0],e=o[n]),null!==e&&(document.getElementById("views-count").textContent=e)}catch(e){console.error("Supabase update error:",e)}}
updateViewCounter();let currentActivity=null,activityUpdateInterval=null,isLoadingActivity=!1;async function fetchLanyardData(){if(!isLoadingActivity){isLoadingActivity=!0;var t=document.getElementById("activity-error");try{var e=await fetch("https://api.lanyard.rest/v1/users/983427239850946660");if(!e.ok)throw new Error("Network response was not ok");var a=await e.json();if(a.success){var n,{discord_user:o,activities:r,discord_status:i}=a.data;if(o.avatar&&(n=`https://cdn.discordapp.com/avatars/${o.id}/${o.avatar}.png?size=80`,document.getElementById("profile-pic").src=n),document.getElementById("status-indicator").className="status-indicator "+i,o.public_flags){const y=document.getElementById("discord-badges"),v=(y.innerHTML="",o.public_flags),f={1:{icon:"https://cdn.discordapp.com/badge-icons/6ddfca3e8a407c6f88131d87995b4891.png",name:"Discord Staff"},2:{icon:"https://cdn.discordapp.com/badge-icons/3f95485959c00af3f545f00e719633c1.png",name:"Partner"},4:{icon:"https://cdn.discordapp.com/badge-icons/3f95485959c00af3f545f00e719633c1.png",name:"HypeSquad Events"},8:{icon:"https://cdn.discordapp.com/badge-icons/fe3c2244c36f5fcf945496d1e212cdb4.png",name:"Bug Hunter Level 1"},16:{icon:"https://cdn.discordapp.com/badge-icons/fe3c2244c36f5fcf945496d1e212cdb4.png",name:"House of Bravery"},32:{icon:"https://cdn.discordapp.com/badge-icons/fe3c2244c36f5fcf945496d1e212cdb4.png",name:"House of Brilliance"},64:{icon:"https://cdn.discordapp.com/badge-icons/fe3c2244c36f5fcf945496d1e212cdb4.png",name:"House of Balance"},128:{icon:"https://cdn.discordapp.com/badge-icons/3f95485959c00af3f545f00e719633c1.png",name:"Early Supporter"},256:{icon:"https://cdn.discordapp.com/badge-icons/6b6341ccc10e64b7a8ae4e8b8d75a61e.png",name:"Team User"},512:{icon:"https://cdn.discordapp.com/badge-icons/3f95485959c00af3f545f00e719633c1.png",name:"System"},16384:{icon:"https://cdn.discordapp.com/badge-icons/fe3c2244c36f5fcf945496d1e212cdb4.png",name:"Bug Hunter Level 2"},131072:{icon:"https://cdn.discordapp.com/badge-icons/3f95485959c00af3f545f00e719633c1.png",name:"Active Developer"}};Object.keys(f).forEach(e=>{var t,a;v&parseInt(e)&&((t=document.createElement("div")).className="profile-badge",t.style.backgroundImage=`url(${f[e].icon})`,(a=document.createElement("span")).className="badge-tooltip",a.textContent=f[e].name,t.appendChild(a),y.appendChild(t))})}
var s,d,c,l,m,u,g,p=document.getElementById("activity-container");r&&0<r.length&&(s=r.find(e=>4!==e.type))?(currentActivity=s,p.style.display="block",t.style.display="none",d=document.getElementById("activity-icon"),c=document.getElementById("activity-title"),0===s.type?"782685898163617802"===s.application_id||"Visual Studio Code"===s.name?(d.innerHTML='<i class="fas fa-code"></i>',c.textContent="Visual Studio Code"):(d.innerHTML='<i class="fas fa-gamepad"></i>',c.textContent="Playing a Game"):1===s.type?(d.innerHTML='<i class="fas fa-video"></i>',c.textContent="Streaming"):2===s.type?(d.innerHTML='<i class="fas fa-music"></i>',c.textContent="Listening to Spotify"):3===s.type?(d.innerHTML='<i class="fas fa-tv"></i>',c.textContent="Watching"):5===s.type?(d.innerHTML='<i class="fas fa-trophy"></i>',c.textContent="Competing"):(d.innerHTML='<i class="fas fa-circle"></i>',c.textContent=s.name||"Activity"),l=document.getElementById("activity-song-name"),m=document.getElementById("activity-artist-name"),u=document.getElementById("activity-album-cover"),2===s.type?(l.textContent=s.details||"Unknown Song",m.textContent=s.state||"Unknown Artist",s.assets&&s.assets.large_image?s.assets.large_image.startsWith("spotify:")?(g=s.assets.large_image.split(":")[1],u.style.backgroundImage=`url(https://i.scdn.co/image/${g})`):u.style.backgroundImage=`url(${s.assets.large_image})`:u.style.backgroundImage="url(https://cdn.discordapp.com/emojis/859459305152708630.png)",document.getElementById("activity-progress-container").style.display="block",document.getElementById("activity-time-container").style.display="flex"):(0===s.type?"782685898163617802"===s.application_id||"Visual Studio Code"===s.name?(l.textContent=s.details||"Working on a project",m.textContent=s.state||"Coding",s.assets&&s.assets.large_image?s.assets.large_image.startsWith("mp:external/")?u.style.backgroundImage=`url(${s.assets.large_image})`:u.style.backgroundImage=`url(https://cdn.discordapp.com/app-assets/${s.application_id}/${s.assets.large_image}.png)`:u.style.backgroundImage="url(https://cdn.discordapp.com/app-icons/782685898163617802/5d7b608a4684eb883f2f6a0d9a7bd6.png)"):(l.textContent=s.name||"Unknown Game",m.textContent=s.details||"Playing",s.assets&&s.assets.large_image?u.style.backgroundImage=`url(https://cdn.discordapp.com/app-assets/${s.application_id}/${s.assets.large_image}.png)`:u.style.backgroundImage="url(https://cdn.discordapp.com/emojis/859459305152708630.png)"):(l.textContent=s.name||"Activity",m.textContent=s.state||s.details||"Status",u.style.backgroundImage="url(https://cdn.discordapp.com/emojis/859459305152708630.png)"),document.getElementById("activity-progress-container").style.display="none",document.getElementById("activity-time-container").style.display="none"),2===s.type&&s.timestamps&&!activityUpdateInterval&&(updateActivityProgress(),activityUpdateInterval=setInterval(updateActivityProgress,1e3))):(p.style.display="none",currentActivity=null,activityUpdateInterval&&(clearInterval(activityUpdateInterval),activityUpdateInterval=null),t.style.display="none")}}catch(e){console.error("Error fetching Lanyard data:",e),t.style.display="block"}finally{isLoadingActivity=!1}}}
function updateActivityProgress(){var e,t,a,n,o,r,i;currentActivity&&currentActivity.timestamps?(i=document.getElementById("activity-progress-bar"),e=document.getElementById("activity-current-time"),t=document.getElementById("activity-total-time"),a=currentActivity.timestamps.start,(n=currentActivity.timestamps.end)<(o=Date.now())?(document.getElementById("activity-container").style.display="none",currentActivity=null,activityUpdateInterval&&(clearInterval(activityUpdateInterval),activityUpdateInterval=null)):(r=Math.max(0,Math.min(100,(o-a)/(n-a)*100)),i.style.width=r+"%",e.textContent=(i=e=>{var e=Math.floor(e/1e3),t=e%60;return Math.floor(e/60)+":"+(t<10?"0":"")+t})(o-a),t.textContent=i(n-a))):activityUpdateInterval&&(clearInterval(activityUpdateInterval),activityUpdateInterval=null)}
fetchLanyardData(),setInterval(fetchLanyardData,1e3),document.getElementById("discord-link").addEventListener("click",()=>{navigator.clipboard.writeText("leakedds").then(()=>{const e=document.getElementById("notification");e.classList.add("show"),setTimeout(()=>{e.classList.remove("show")},3e3)})}),document.getElementById("github-link").addEventListener("click",()=>{const e=document.getElementById("second-notification");e.classList.add("show"),setTimeout(()=>{e.classList.remove("show")},3e3)});const audioPlayer=document.getElementById("audio-player"),playBtn=document.getElementById("play-btn"),playIcon=document.getElementById("play-icon"),progressBar=document.getElementById("progress"),volumeLevel=document.getElementById("volume-level"),currentTimeEl=document.getElementById("current-time"),totalTimeEl=document.getElementById("total-time"),volumeDown=document.getElementById("volume-down"),volumeUp=document.getElementById("volume-up"),volumeSlider=document.getElementById("volume-slider"),albumCover=document.getElementById("album-cover"),songDropdownBtn=document.getElementById("song-dropdown-btn"),songDropdown=document.getElementById("song-dropdown"),songs=[{title:"Feel Good",artist:"Clara La San",src:"/assets/audio/l/song1.mp3",cover:"https://t11v.icu/imgs/covers/feelgood.jpg"},{title:"2 Phones",artist:"Kevin Gates ft. (Gabreil)",src:"/assets/audio/l/song2.mp3",cover:"https://t11v.icu/imgs/covers/2phones.jpg",},{title:"Love Sick",artist:"H2O, Rocco",src:"/assets/audio/l/song3.mp3",cover:"https://t11v.icu/imgs/covers/lovesick.jpg"}];let currentSongIndex=0,isPlaying=!1,isCrossfading=!1;function loadSong(a){var e=songs[a];if(audioPlayer.src=e.src,document.getElementById("song-title").textContent=e.title,document.getElementById("artist-name").textContent=e.artist,e.cover){const t=document.createElement("img");t.src=e.cover,t.alt="Album Cover",albumCover.innerHTML="",albumCover.appendChild(t),e.NSFW&&(t.classList.add("NSFW-blur"),t.addEventListener("click",()=>{showWarning(t)}))}else albumCover.innerHTML='<i class="fas fa-music"></i>';document.querySelectorAll(".dropdown-item").forEach((e,t)=>{t===a?e.classList.add("active"):e.classList.remove("active")})}
loadSong(currentSongIndex),audioPlayer.addEventListener("loadedmetadata",()=>{var e,t;audioPlayer.duration&&(e=Math.floor(audioPlayer.duration/60),t=Math.floor(audioPlayer.duration%60),totalTimeEl.textContent=e+":"+(t<10?"0":"")+t)}),audioPlayer.addEventListener("timeupdate",()=>{var e,t;audioPlayer.duration&&(e=audioPlayer.currentTime/audioPlayer.duration*100,progressBar.style.width=e+"%",e=Math.floor(audioPlayer.currentTime/60),t=Math.floor(audioPlayer.currentTime%60),currentTimeEl.textContent=e+":"+(t<10?"0":"")+t)}),playBtn.addEventListener("click",()=>{isPlaying=isPlaying?(audioPlayer.pause(),!(playIcon.className="fas fa-play")):(audioPlayer.play().catch(e=>{console.error("Playback failed:",e),loadSong(currentSongIndex=(currentSongIndex+1)%songs.length),audioPlayer.play().catch(e=>console.error("Next song also failed:",e))}),playIcon.className="fas fa-pause",!0)}),albumCover.addEventListener("click",()=>{playBtn.click()});const progressBarElement=document.getElementById("progress-bar");function updateVolume(e){audioPlayer.volume=e,volumeLevel.style.width=100*e+"%",userPreferences.volume=e,localStorage.setItem("volume",e),0===e?(volumeDown.className="fas fa-volume-mute volume-icon",volumeUp.className="fas fa-volume-mute volume-icon"):(volumeDown.className="fas fa-volume-down volume-icon",volumeUp.className="fas fa-volume-up volume-icon")}
function nextSong(){isCrossfading||(isCrossfading=!0,loadSong(currentSongIndex=(currentSongIndex+1)%songs.length),audioPlayer.currentTime=0,audioPlayer.volume=userPreferences.volume,isPlaying&&audioPlayer.play(),isCrossfading=!1)}
progressBarElement.addEventListener("mousedown",e=>{const t=e=>{var t=progressBarElement.getBoundingClientRect(),e=e.clientX-t.left,e=Math.max(0,Math.min(1,e/t.width));audioPlayer.currentTime=e*audioPlayer.duration},a=(t(e),e=>{t(e)}),n=()=>{document.removeEventListener("mousemove",a),document.removeEventListener("mouseup",n)};document.addEventListener("mousemove",a),document.addEventListener("mouseup",n)}),updateVolume(userPreferences.volume),volumeSlider.addEventListener("mousedown",e=>{const t=e=>{var t=volumeSlider.getBoundingClientRect(),e=e.clientX-t.left;updateVolume(Math.max(0,Math.min(1,e/t.width)))},a=(t(e),e=>{t(e)}),n=()=>{document.removeEventListener("mousemove",a),document.removeEventListener("mouseup",n)};document.addEventListener("mousemove",a),document.addEventListener("mouseup",n)}),volumeDown.addEventListener("click",()=>{updateVolume(0<audioPlayer.volume?0:.7)}),volumeUp.addEventListener("click",()=>{var e=audioPlayer.volume;updateVolume(e<1?Math.min(1,e+.1):0)}),document.getElementById("prev-btn").addEventListener("click",()=>{3<audioPlayer.currentTime?audioPlayer.currentTime=0:(loadSong(currentSongIndex=(currentSongIndex-1+songs.length)%songs.length),audioPlayer.currentTime=0,isPlaying&&audioPlayer.play())}),document.getElementById("next-btn").addEventListener("click",()=>{nextSong()}),audioPlayer.addEventListener("ended",()=>{nextSong()}),songDropdownBtn.addEventListener("click",e=>{e.stopPropagation(),songDropdown.classList.toggle("show")}),document.addEventListener("click",()=>{songDropdown.classList.remove("show")}),document.querySelectorAll(".dropdown-item").forEach(t=>{t.addEventListener("click",e=>{e.stopPropagation();e=parseInt(t.getAttribute("data-index"));loadSong(currentSongIndex=e),audioPlayer.currentTime=0,isPlaying&&audioPlayer.play(),songDropdown.classList.remove("show")})}),document.addEventListener("keydown",e=>{var t;"Space"===e.code&&e.target===document.body&&(e.preventDefault(),playBtn.click()),"ArrowLeft"===e.code&&e.target===document.body&&(e.preventDefault(),document.getElementById("prev-btn").click()),"ArrowRight"===e.code&&e.target===document.body&&(e.preventDefault(),document.getElementById("next-btn").click()),"ArrowUp"===e.code&&e.target===document.body&&(e.preventDefault(),t=audioPlayer.volume,updateVolume(Math.min(1,t+.1))),"ArrowDown"===e.code&&e.target===document.body&&(e.preventDefault(),t=audioPlayer.volume,updateVolume(Math.max(0,t-.1))),"KeyM"===e.code&&e.target===document.body&&(e.preventDefault(),volumeDown.click())});let touchStartX=0,touchEndX=0;const musicPlayerElement=document.getElementById("music-player");function handleSwipe(){var e=touchStartX-touchEndX;50<Math.abs(e)&&(0<e?document.getElementById("next-btn"):document.getElementById("prev-btn")).click()}
/**
 * @The11View
 * NSFW Cover Injection
 * -------------------------------------------------------------
 * CSS is injected inline to ensure the blur and modal features
 * work without external dependencies. This keeps player logic,
 * styling, and updates consistent in a single file.
 *
 * The method allows safe embedding across pages / biolinks
 * without relying on external stylesheets or outdated assets.
 *
 * To disable / enable NSFW filtering:
 *   Dashboard > Page Settings > Songs > Covers > NSFW Toggle
 * -------------------------------------------------------------
 */
function showWarning(e){if(e.classList.contains("NSFW-blur")){const t=document.createElement("div"),a=(t.className="warning-modal",t.innerHTML=`
<div class=warning-box><h3><i class="fa-exclamation-triangle fas"></i> NSFW Content</h3><p>This cover may contain graphic imagery. Do you wish to unblur it?<div class=actions><button class=cancel-btn>Cancel</button> <button class=confirm-btn>Unblur</button></div></div>
`,document.body.appendChild(t),requestAnimationFrame(()=>{t.classList.add("fade-in")}),()=>{t.classList.remove("fade-in"),t.classList.add("fade-out"),setTimeout(()=>t.remove(),300)});t.querySelector(".cancel-btn").addEventListener("click",a),t.querySelector(".confirm-btn").addEventListener("click",()=>{e.classList.remove("NSFW-blur"),a()})}}
musicPlayerElement.addEventListener("touchstart",e=>{touchStartX=e.changedTouches[0].screenX}),musicPlayerElement.addEventListener("touchend",e=>{touchEndX=e.changedTouches[0].screenX,handleSwipe()});const style=document.createElement("style"),draggableElements=(style.textContent=`
#album-cover img.NSFW-blur{filter:blur(20px);cursor:pointer;transition:filter 0.3s ease}.warning-modal{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.4);backdrop-filter:blur(8px);-webkit-backdrop-filter:blur(8px);display:flex;justify-content:center;align-items:center;z-index:9999;opacity:0;transition:opacity 0.3s ease}.warning-modal.fade-in{opacity:1}.warning-modal.fade-out{opacity:0}.warning-box{background:var(--bg-card);padding:20px;border-radius:12px;max-width:300px;text-align:center;color:var(--text-primary);box-shadow:0 0 20px rgba(0,0,0,0.5);border:1px solid var(--border);transform:scale(0.95);transition:transform 0.3s ease}.warning-modal.fade-in.warning-box{transform:scale(1)}.warning-box h3{margin:0 0 10px;font-size:18px;color:var(--accent);display:flex;align-items:center;justify-content:center;gap:8px}.warning-box h3 i{color:var(--accent);font-size:20px}.warning-box p{font-size:14px;margin-bottom:15px;color:var(--text-secondary)}.actions{display:flex;justify-content:space-between;gap:10px}.actions button{flex:1;padding:8px;border:none;border-radius:8px;cursor:pointer;font-weight:bold;transition:background 0.2s ease}.cancel-btn{background:var(--border);color:var(--text-primary)}.confirm-btn{background:var(--accent);color:var(--text-primary)}.cancel-btn:hover{background:var(--border-hover)}.confirm-btn:hover{background:var(--accent-hover)}
`,document.head.appendChild(style),document.querySelectorAll(".card, .music-player, .discord-server")),mainContainer=document.getElementById("main-container");let draggedElement=null;function getDragAfterElement(e,n){return[...e.querySelectorAll(".card, .music-player, .discord-server:not(.dragging)")].reduce((e,t)=>{var a=t.getBoundingClientRect(),a=n-a.top-a.height/2;return a<0&&a>e.offset?{offset:a,element:t}:e},{offset:Number.NEGATIVE_INFINITY}).element}
function saveLayoutOrder(){var e=[...mainContainer.children].map(e=>e.id);localStorage.setItem("layoutOrder",JSON.stringify(e))}
function loadLayoutOrder(){var e=localStorage.getItem("layoutOrder");if(e){e=JSON.parse(e);const t={};[...mainContainer.children].forEach(e=>{t[e.id]=e}),mainContainer.innerHTML="",e.forEach(e=>{t[e]&&mainContainer.appendChild(t[e])})}}
draggableElements.forEach(t=>{t.addEventListener("dragstart",e=>{(draggedElement=t).classList.add("dragging"),e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/html",t.innerHTML)}),t.addEventListener("dragend",()=>{t.classList.remove("dragging"),t.classList.remove("drag-over")}),t.addEventListener("dragover",e=>{e.preventDefault(),draggedElement&&draggedElement!==t&&(null==(e=getDragAfterElement(mainContainer,e.clientY))?mainContainer.appendChild(draggedElement):mainContainer.insertBefore(draggedElement,e))}),t.addEventListener("dragenter",e=>{e.preventDefault(),draggedElement&&draggedElement!==t&&t.classList.add("drag-over")}),t.addEventListener("dragleave",()=>{t.classList.remove("drag-over")})}),loadLayoutOrder(),draggableElements.forEach(e=>{e.addEventListener("dragend",saveLayoutOrder)})
const cards = document.querySelectorAll(".card, .music-player, .discord-server");
cards.forEach(n => {
   n.addEventListener("mousemove", e => {
      var t = n.getBoundingClientRect(),
         a = e.clientX - t.left;
      n.style.transform = `perspective(1000px) rotateX(${(e.clientY-t.top-t.height/2)/20}deg) rotateY(${(t.width/2-a)/20}deg)`
   }), n.addEventListener("mouseleave", () => {
      n.style.transform = "perspective(1000px) rotateX(0) rotateY(0)"
   })
});
